<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>{$collection.title}</title>
	<meta name="keywords" content=""/>
	<meta name="description" content=""/>
	<meta http-equiv="Content-Language" content="zh-CN"/>
	 {if $pmc eq 1}  
    <link href="{$publicserver}/public/collection/css/framework7.ios.min.css" rel="stylesheet">
    {/if}

	<!--公共css样式-->
	<link rel="stylesheet" href="{$publicserver}/public/collection/css/publicCss.css">
	<!--全局设置页面样式-->
	<!--<link rel="stylesheet" href="css/GlobalSetting.css"/>-->
	<!--全局设置——预览样式开始-->
	<link rel="stylesheet" href="{$publicserver}/public/collection/css/GlobalSetting_ALL.css">
	<link rel="stylesheet" href="{$publicserver}/public/collection/css/quill.bubble.css">
    <link rel="stylesheet" href="{$publicserver}/public/collection/css/quill.snow.css">
	<link rel="stylesheet" href="{$publicserver}/public/collection/css/quill.core.css">
	


    
    <style type="text/css">

.checkboxwrap input[type="checkbox"]:checked+ .choice-box-DX {
    background: url({$publicserver}/public/collection/images/QJSZImg/BTXZImg.png) no-repeat center center;
    background-size: contain;
	/*
    display: inline-block;
    color: #9a9a9a;
    font-size: .7rem;
	padding-left: 1.2rem;
	*/
}


.choice #userlicense_check:checked + .choice-box1 {
    background: url({$publicserver}/public/collection/images/MobileImg/xz1.jpg) no-repeat left top;
    background-size: contain; 
	
}

	</style>	
	<script src="http://file.xdf.cn/diy/public/js/jquery.1.7.2.min.js"></script>
	<script src="{$publicserver}/public/gouke/app/js/layer/layer.js" type="text/javascript"></script>
	<link rel="stylesheet" href="{$publicserver}/public/gouke/app/js/layer/skin/layer.css">

	<!--<link rel="stylesheet" href="css/GlobalSetting_ALL-online.css">-->
	<!--[if IE 6]>
	<script src="js/DD_belatedPNG_0.0.8a-min.js"></script>
	<script type="text/javascript">
		DD_belatedPNG.fix('div');
	</script>
	<![endif]-->
	<!--neworiental全站异步 google分析开始-->
	<script>
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-20005525-1']);
        _gaq.push(['_setDomainName', '.xdf.cn']);
        _gaq.push(['_setAllowLinker', true]);
        _gaq.push(['_setAllowHash', false]);
        _gaq.push(['_addOrganic', 'baidu', 'word']);
        _gaq.push(['_addOrganic', '360', 'q']);
        _gaq.push(['_addOrganic', 'so.com', 'q']);
        _gaq.push(['_addOrganic', 'soso', 'w']);
        _gaq.push(['_addOrganic', 'yodao', 'q']);
        _gaq.push(['_addOrganic', 'sogou', 'query']);
        _gaq.push(['_addOrganic', 'gougou', 'search']);
        _gaq.push(['_addOrganic', 'so.360.cn', 'q']);
        _gaq.push(['_addOrganic', 'haosou', 'q']);
        _gaq.push(['_setLocalGifPath', 'http://ads.staff.xdf.cn/_.gif']);
        _gaq.push(['_setLocalRemoteServerMode']);
        _gaq.push(['_trackPageview']);
	</script>
	<!-- google分析结束-->
	<!-- 晶赞头部统计js S -->
	<script type="text/javascript" src="http://www.xdf.cn/zhuanti/schoolJs/stat/jingzan-headStatsCode.js"></script>
	<!-- 晶赞头部统计js E -->
	<base target="_blank"/>
</head>
<body>
<!--微信运营工具16--预览开始-->
<div class="WXYYGJ_16">
	<div class="WXYYGJ_16_Box">
		<div class="sectionZBox">
			<div class="banner"><img src="{$publicserver}/public/collection/images/GlobalSetting_TCC/BGH2Img_wx.jpg" alt=""/></div>
			<div class="BT">
				<p class="sectionZBox1">{$formlabel}</p>
				
				{if $bannerimage}
				<img src="{$bannerimage}" alt="" />
				{/if}
				<p class="sectionZBox2"></p>
				<div class="ql-container ql-snow" style="border:0;height:auto;">
					<div class="ql-editor">{$formdesc}
					</div>
				</div>
			</div>

			<p class="fenline"></p>
			<div class="formAll_WXMB">
				<form action="" class="form">
				{if $inputs}
						{foreach from = $inputs item=item}
						
						   {if $item.type eq 'p'}
							<div class="con_p con_p_all">
								<p class="contxb">{$item.value}</p>
							</div>
							<div class="fenwrap"></div>
							{/if}
							
							
							{if $item.type eq 'selectTwo'}
					<!--二级联动-->
							<div id="{$item.name}" class="formGroup_ZTMB clear">
								<label for="twolevellink"><b>{if $item.required}*{/if}</b>{$item.label}</label>
								<select class="yiji twolevellink floatL" onchange="ChangeerjiSelect{$item.name}(this.value,$('#{$item.name}'))">
								</select>
								<select class="erji twolevellink floatR" name="{$item.name}">
								</select>
							</div>
					<!--二级联动-->		
							{/if}
							
						{if $item.type eq 'text'}
						{if $item.name eq 'mobile'}
						<p class="con_p">
							<span class="con_span"><b>{if $item.required}*{/if}</b>{$item.label}</span>
							<input type="text"  id="{$item.name}" {if $item.required}required{/if} name="{$item.name}" placeholder="{$item.placeholder}"/>
						</p>
						<p class="con_p wxValidateWrap graphCodeWrap" id="graphCodeWrap">
							<span class="con_span"><b>{if $item.required}*{/if}</b>验证码</span>
							<input id="graphCode" type="text"  name="graphCode" placeholder="请输入验证码"/>
							<img src="{$publicserver}/public/collection/images/QJSZImg/graphcode.png" alt=""/>
						</p>
						<p class="con_p msgCodeWrap wxValidateWrap" id="msgCodeWrap">
							<span class="con_span"><b>{if $item.required}*{/if}</b>短信验证码</span>
							<input type="text" id="msgCode" name="graphCode" placeholder="请输入短信验证码">
							<span class="validate"><input type="button" value="获取验证码" class="validatebtn"/></span>
						</p>
						{else}
						<p class="con_p">
							<span class="con_span"><b>{if $item.required}*{/if}</b>{$item.label}</span>
							<input type="text"  id="{$item.name}" name="{$item.name}" placeholder="{$item.placeholder}"/>
						</p>

						{/if}
						{/if}
							
							{if $item.type eq 'radio' and $item.name eq 'gender'}
					<div class="con_p a">
						<span class="con_span"><b>{if $item.required}*{/if}</b>{$item.label}</span>
						<p class="contxb">
							<input type="radio" id="nan" name="{$item.name}" value="1" checked="checked" >
							<label name="fc_gender_lab" for="nan" class="checked">男</label>
							<input type="radio" id="nv" name="{$item.name}" value="0">
							<label name="fc_gender_lab" for="nv" style="margin-left:20px;">女</label>
						</p>
					</div>		
							{/if}
							
							{if $item.type eq 'select'}
					<p class="con_p b">
						<span class="con_span"><b>{if $item.required}*{/if}</b>{$item.label}</span>
						<select name="{$item.name}"   id="{$item.name}" class="set">
							<span style="text-align: center;"></span>
							{if $item.defaultvalue}
				                    	<option value="">{$item.defaultvalue}</option>
				            {/if}
							{foreach from = $item.values item=i}
												<option value="{$i.value}">{$i.name}</option>
							{/foreach}
						</select>
					</p>		
							{/if}
							
							
							{if $item.type eq 'textarea'}
				<p class="con_p con_p_all">
					<span class="con_span">{$item.label}</span>
				</p>
				<p class="con_p bbnone con_p_textarea">
					<textarea name="{$item.name}"  rows="" cols=""  placeholder="{$item.placeholder}" class="duohang" maxlength="{$item.choiceNumber}"></textarea>
				</p>		
							{/if}
							
							{if $item.type eq 'radio' and $item.name neq 'gender'}
				<p class="con_p con_p_all">
					<span class="con_span"><b>{if $item.required}*{/if}</b>{$item.label}（单选）</span>
				</p>
				<div class="checkboxwrap">
				{foreach from = $item.values item=i name=foo}
					<p class="con_p"><input type="radio" name="{$item.name}"  id="{$item.name}_{$smarty.foreach.foo.index}"  value="{$i.value}">
					<label name="fc_gender_lab" for="{$item.name}_{$smarty.foreach.foo.index}" >{$i.name}</label></p>
				{/foreach}		
				</div>
					<div class="fenwrap"></div>
							{/if}
							
							{if $item.type eq 'checkbox'}
				<p class="con_p con_p_all">
					<span class="con_span"><b>{if $item.required}*{/if}</b>{$item.label}{if $item.choiceNumber neq ''}（多选，可选{$item.choiceNumber}个）{else}（多选）{/if}</span>
				</p>
				<div class="checkboxwrap">
				{foreach from = $item.values item=i name=foo}
					<p>
					<input type="checkbox" id="{$item.name}_{$smarty.foreach.foo.index}"  name="{$item.name}" value="{$i.value}" class="choice-box_hind" >
					<label for="{$item.name}_{$smarty.foreach.foo.index}"  class="choice-box-DX"></label>{$i.name}</p>
				{/foreach}	
				</div>
					<div class="fenwrap"></div>
							{/if}
							{if $item.type eq 'score'}	
			<!--<p style="width:100%;height:18px;background:#f6f6f6;"></p>-->

			<div class="addwrap formGroup_ZTMB clear">
				<label class="clear"><b>{if $item.required}*{/if}</b>{$item.label}</label>
				<p class="score">{$item.describe}</p>
				<input type="hidden" name="{$item.name}" id="{$item.name}">
				<p class="xj_zs">
				{foreach from = $item.values item=i name=foo}
						<span class="{$i}"  alt="{$smarty.foreach.foo.index}" for="{$item.name}"></span>
				{/foreach}							
				</p>
			</div>
			<div class="fenwrap"></div>

						{/if}	
						{if $item.type eq 'image'}
			<div class="uploadwrap">
				<div class="con_p">
					<div class="uploadtit clear">
						<span class="con_span"><b>{if $item.required}*{/if}</b>{$item.label}</span>
						<select name="" class="set">
							<option value="">请上传图片</option>
						</select>
					</div>
					<div class="sc_sfz"><img src="{$publicserver}/public/collection/images/MobileImg/sfz.png" alt="" /></div>
				</div>
			</div>
			<div class="fenwrap"></div>
						{/if}
						{if $item.type eq 'pmc'}
                			 <div class="formGroup clear">
                			 <p class="con_p">
								<span class="con_span"><b>{if $item.required}*{/if}</b>{$item.label}</span>
								<input type="text"  id="location" name="pmc"  value="{$item.province}  {$item.city}"/>
							</p>
                			 </div>
                			
                		{/if}
                		{if $item.type eq 'date'}
							<div class="con_p">
			                    <span class="con_span"><b>{if $item.required}*{/if}</b>{$item.label}</span>
			                   <input type="text" placeholder="{$item.placeholder}" id="{$item.name}"   name="{$item.name}"  />
			                </div>
							{/if}
							
							{if $item.type eq 'datetime'}
							<div class="con_p">
			                     <span class="con_span"><b>{if $item.required}*{/if}</b>{$item.label}</span>  
			                     <input type="text" placeholder="{$item.placeholder}" id="{$item.name}"   name="{$item.name}"  data-options="{'type':'YYYY-MM-DD hh:mm:ss','beginYear':1970,'endYear':2099}"/>
			                </div>
							{/if}
						{/foreach}
				{/if}			
				
				</form>
			</div>
			
			<div class="tiaokuan">
				<div class="formGroup clear">
					<div class="formGroup_YHFWTK clear">
						<input type="checkbox" name="choice-box-XQ" id="YHFWTK" class="choice-box_hind">
						<label for="YHFWTK" class="choice-box-XQ"></label><span>我已阅读并同意<a href="/collection/userlicense">《用户服务条款》</a>和 <a href="/collection/privacypolicy">《隐私政策》</a></span>
					</div>
				</div>

				<div class="formGroup clear">
					<div class="formGroup_AN" style="background:grey;">提交</div>
				</div>
			</div>

			<div class="formGroup_DBSM">
				<!--<p class="formGroup_DBSM2">©新东方 版权所有</p>-->
				<p class="formGroup_DBSM2">{$copyright.groupName}<br>
					{$copyright.recordNumber}<br>
					{$copyright.hotName} {$copyright.tel}</p>
			</div>
		</div>
		 {if $preview eq 1}
		<div class="QRCode">
			<div class="QRCode_Up">
				<img src="{$publicserver}/public/collection/fileS/QRfilePath/{$collection.id}.png" alt=""/>
				<p>扫描二维码在手机上预览</p>
				<!-- <a href="javascript:void(0);">返回编辑界面</a> -->
			</div>
			<div class="QRCode_Down" style="display:none;">
				<input type="text" value="http://{$domain}/collection/collect?id={$collection.aid}" style="padding: 10px;" readonly="readonly">
				<img src="{$publicserver}/public/collection/fileS/QRfilePath/{$collection.aid}.png" alt=""/>
				<a href="javascript:void(0);">复制网址</a><a href="javascript:void(0);">下载二维码</a>
			</div>
		</div>
		{/if}
	</div>
</div>
<!--微信运营工具16--预览结束-->
<script src="{$publicserver}/public/collection/js/jquery.date.js"></script>
<script>
	console.log('{$collection.aid}')

	var mobilereg=/^[1][3,4,5,6,7,8][0-9]{9}$/;
	var emailreg = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;

$('.xj_zs span').click(function(e){
	 var score=parseInt($(this).attr("alt"))+1;
	 var base=co=cn="";
	 base=$(this).attr('class').replace("_light","");
	 //base=base.replace(" active-state","");
	 $(this).removeClass(base);
	 $(this).removeClass(base+"_light");
	 $(this).addClass(base+"_light");
	 
	 $(this).prevAll().removeClass(base);
	 $(this).prevAll().removeClass(base+"_light");
	 $(this).prevAll().addClass(base+"_light");
	 
	 $(this).nextAll().removeClass(base);
	 $(this).nextAll().removeClass(base+"_light");
	 $(this).nextAll().addClass(base);
	 
	 $("#"+$(this).attr("for")).val(score);
	 /*
	 $(".xj_zs span").each(function(){
		 var index=parseInt($(this).attr("alt"));
		 
		 if(index<=score){
			 co=$(this).attr('class').replace("_light","");
			 cn=co+"_light";
			 $(this).removeClass(co);
			 $(this).addClass(cn);
			 
		 }
		 if(index>score){
			 co=$(this).attr('class');
			 cn=co.replace("_light","");
			 $(this).removeClass(co);
			 $(this).addClass(cn);
		 }
	 });
	 alert(score+1);
	 return score+1;
	 */
});

{if $inputs}
{foreach from = $inputs item=item}

{if $item.type eq 'datetime' or $item.type eq 'date'}
$.date('#{$item.name}');
{/if}

{if $item.type eq 'selectTwo'}
var yijiArr{$item.name}={$item.valuespc};

// var yijiArr = [];
var selid{$item.name} = {$item.name};
for (var i = 0; i < yijiArr{$item.name}.length; i++) {
	$(selid{$item.name}).find(".yiji").append("<option value="+yijiArr{$item.name}[i].firstSelect.name+">"+yijiArr{$item.name}[i].firstSelect.name+"</option>");
}
ChangeerjiSelect{$item.name}($(selid{$item.name}).find(".yiji").val(),$(selid{$item.name}));
function ChangeerjiSelect{$item.name}(value,ele)
{
	//var yijiArr{$item.name}=JSON.parse($(ele).find('input').val());
	for (var i = 0; i < yijiArr{$item.name}.length; i++) {
		if(yijiArr{$item.name}[i].firstSelect.name==value){
			$(ele).find(".erji option").remove();
			for (var j = 0; j < yijiArr{$item.name}[i].secondSelect.length; j++) {
				$(ele).find(".erji").append("<option value="+yijiArr{$item.name}[i].secondSelect[j].name+">"+yijiArr{$item.name}[i].secondSelect[j].name+"</option>");
			};
		}
	}
}
{/if}

{/foreach}	
{/if}
</script>

{if $pmc eq 1}     
<script type="text/javascript" src="{$publicserver}/public/collection/js/framework7.min.js"></script>
<script type="text/javascript" src="{$publicserver}/public/collection/js/district.js"></script>
<script type="text/javascript">
;(function(window,$,undefined){
	function getProvince(regions){ {if $province eq ''} return regions['provincesArr']; {else} return new Array("{$province}");{/if} }
		function getCity(regions,provinceName){return regions['provinces'][provinceName]['citiesArr'];}
		function getArea(regions,provinceName,cityName){
			if(cityName==''){
				cityName=regions['provinces'][provinceName]['citiesArr'][0];
			}
			return regions['provinces'][provinceName]['cities'][cityName]['areasArr'];
			
		}
		var myApp=new Framework7();
		var province=getProvince(regions),
		{if $province eq '' and $city eq ''}
					city=getCity(regions,'北京市'),
					area=getArea(regions,'北京市','北京市');
		{/if}
		{if $province neq '' and $city eq ''}
				city=getCity(regions,'{$province}'),
				area=getArea(regions,'{$province}','');
		{/if}

		{if $province neq '' and $city neq ''}
					city=new Array('{$city}'),
					area=getArea(regions,'{$province}','{$city}');
		{/if}	

var provinceSelect='{$province}';
var pickerLocation=myApp.picker({input:'#location',rotateEffect:true,toolbarTemplate:'<div class="toolbar">\
                            <div class="toolbar-inner">\
                            <div class="left">\
                            </div>\
                            <div class="right">\
                                    <a href="#" class="link close-picker">完成</a>\
                                </div>\
                            </div>\
                        </div>',cols:[{cssClass:'f-s-14',width:'33.33%',textAlign:'left',values:province,
                        	onChange:function(picker,province){if(picker.cols[1].replaceValues){provinceSelect=province;city=getCity(regions,province);area=getArea(regions,province,city[0]);picker.cols[1].replaceValues(city);if(area.length!==0){picker.cols[2].replaceValues(area);}else{picker.cols[2].replaceValues(city);}}}},{cssClass:'f-s-14',width:'33.33%',textAlign:'center',values:city,onChange:function(picker,city){if(picker.cols[2].replaceValues){area=getArea(regions,provinceSelect,city);if(area.length!==0){picker.cols[2].replaceValues(area);}else{picker.cols[2].replaceValues([city]);}}}},{cssClass:'f-s-14',width:'33.33%',textAlign:'right',values:area,}]});})(window,jQuery);

</script>
{/if}
<script>
		//  验证码
		function getVerification(){
			if('{$phoneStatus}'=='0'){
				return false;
			}else{
				return true;
			}
		}
	
		{if $preview neq 1}
			getVerification()?$(".msgCodeWrap").css("display","block"):$(".msgCodeWrap").css("display","none");
		{/if}
		{if $preview eq 1}
			getVerification()?$(".msgCodeWrap").css("display","block"):$(".msgCodeWrap").css("display","none");
		{/if}
		var timeId;
		var curCount;
		var lastPhone=$("[name='mobile']").val()
	
		function getParams4Code(type,code,code3){
			var data=new Object();
			data.id='{$collection.aid}';
			data.name='{$collection.title}';
			getVerification() ? data.verification='7' : data.verification='12';
			data.status=type;
			data.code=code;
			data.code3=code3;
			var phone=$("[name='mobile']").val()
			if(!phone){
				layer.msg('手机号不能为空!');
				return false;
			}else{
				if(!mobilereg.test(phone)) {
					layer.msg('手机号无效');
					return false;
				}
				data.phone=phone;
			}
			return data;
		}
		// 发送验证码
		$(".validatebtn").on('click',function(){
			var data=getParams4Code("1","","")
			if(!data) return;
	
			getValidate(data,function(obj){
				if(!obj)return;
				var {code,msg,code}=JSON.parse(obj);
				if(code==200 || code == 201){
					layer.msg('发送短信验证码成功,请及时填写');
					$("#graphCodeWrap").addClass("graphCodeWrap")
				}else if(code == '-1009'){
					$("#graphCodeWrap").removeClass("graphCodeWrap")
					var data=getParams4Code("3","","")
					if(!data) return;
					var url="ajax_collectionverifymobile?status=3&phone="+data.phone+"&verification="+data.verification+"&name="+data.name+"&id="+data.id+"&time="+new Date().getTime();
					$("#graphCodeWrap img").attr("src",url)
				}else{
					layer.msg(msg)
					$("#graphCodeWrap").addClass("graphCodeWrap")
				}
			})
			
			curCount= 60;//当前剩余秒数
			$(".validatebtn").attr("disabled","true");
			$(".validatebtn").val(curCount+"s后重新发送");
			$(".validatebtn").addClass("unactive")
	
			clearInterval(timeId);
			timeId = setInterval(remainTime, 1000);  
			
		})
		// 获取图像验证码
		$("#graphCodeWrap img").on('click',function(){
			var data=getParams4Code("3","","")
			if(!data) return;
			var url="ajax_collectionverifymobile?status=3&phone="+data.phone+"&verification="+data.verification+"&name="+data.name+"&id="+data.id+"&time="+new Date().getTime();;
			$("#graphCodeWrap img").attr("src",url)
		})
	
	
		function getValidate(data,callback){
			$.get("ajax_collectionverifymobile",data).success(function(obj){callback(obj)});
		}
	    function remainTime() {        
	        if (curCount == 1) {                 
		        window.clearInterval(timeId);
		        $(".validatebtn").removeAttr("disabled");
		        $(".validatebtn").val("重新获取验证码");
				$(".validatebtn").removeClass("unactive")
		    } else{
				curCount--;  
		        $(".validatebtn").val(curCount + "秒后重新获取");
			}   
	    }  
	
</script>
<!--google文件调用开始-->
<script> (function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = 'http://file.xdf.cn/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
<!--google文件调用结束-->
<!--百度统计开始-->
<script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    // document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fe010d1faf316a4dbfe8639481a2a3f90' type='text/javascript'%3E%3C/script%3E"));
</script>
<!--百度统计结束-->
<script type="text/javascript" src="http://images.xdf.cn/cms20150819/xinbannew/js/xdf_global.min.js"></script>
<script type="text/javascript">
    st('default', '{}');
</script>
<!-- 晶赞底部统计js S -->
<script type="text/javascript" src="http://www.xdf.cn/zhuanti/schoolJs/stat/jingzan-footStatsCode.js"></script>
<!-- 晶赞底部统计js E -->
</body>
</html>